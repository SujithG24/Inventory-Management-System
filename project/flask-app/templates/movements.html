{% extends "base.html" %}

{% block title %}Product Movements - Inventory Management{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Product Movements</h2>
    <a href="{{ url_for('add_movement') }}" class="btn btn-primary">Add New Movement</a>
</div>

{% if movements %}
<table>
    <thead>
        <tr>
            <th>Movement ID</th>
            <th>Timestamp</th>
            <th>Product</th>
            <th>From Location</th>
            <th>To Location</th>
            <th style="text-align: center;">Quantity</th>
            <th style="text-align: center; width: 200px;">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for movement in movements %}
        <tr>
            <td><strong>#{{ movement['movement_id'] }}</strong></td>
            <td>{{ movement['timestamp'] }}</td>
            <td>{{ movement['product_name'] }}</td>
            <td>{{ movement['from_loc_name'] or '<em style="color: #6c757d;">External</em>' | safe }}</td>
            <td>{{ movement['to_loc_name'] or '<em style="color: #6c757d;">External</em>' | safe }}</td>
            <td style="text-align: center;"><strong>{{ movement['qty'] }}</strong></td>
            <td>
                <div class="action-buttons" style="justify-content: center;">
                    <a href="{{ url_for('edit_movement', movement_id=movement['movement_id']) }}" class="btn btn-secondary btn-small">Edit</a>
                    <form method="POST" action="{{ url_for('delete_movement', movement_id=movement['movement_id']) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this movement?');">
                        <button type="submit" class="btn btn-danger btn-small">Delete</button>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="empty-state">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
    </svg>
    <h3>No Movements Yet</h3>
    <p>Start tracking inventory movements</p>
    <a href="{{ url_for('add_movement') }}" class="btn btn-primary">Add Movement</a>
</div>
{% endif %}
{% endblock %}
